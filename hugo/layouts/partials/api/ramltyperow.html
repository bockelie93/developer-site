{{$showRequired := .showRequired }}
{{/* {{ $prefix := (print "" .incPrefix) }} */}}

{{ $propType := "" }}
{{ range first 1 .incProp.type }}
  {{ $propType = . }}
{{ end }}

{{ $isCustomType := (not (in site.Params.ramlBuiltinTypes $propType)) }}

<tr>
  {{/* <td><code>{{ (print $prefix .name) }}</code></td> */}}
  <td><code>{{ .incProp.name }}</code></td>
  <td><code>{{ cond (eq $isCustomType true) "object" $propType }}</code></td>
  <td>
    {{ $desc := slice }}
    {{ if (eq $showRequired false)}}
      {{ $desc = $desc | append "" }}
    {{ else if .incProp.required }}
      {{ $desc = $desc | append "_Required._ "}}
    {{ else }}
      {{ $desc = $desc | append "_Optional._ "}}
    {{ end }}

    {{ if (ne .incProp.displayName .incProp.name)}}
      {{ $desc = $desc | append .incProp.displayName | append ". "}}
    {{ end }}

    {{ with .incProp.description }}
      {{ $desc = $desc | append . }}
    {{ end }}

    {{ range $desc }}
      {{ . | markdownify }}
    {{ end }}

    {{ with .incProp.enum }}
      <br/>
      Possible values:
      <ul>
      {{ range . }}
        <li><code>{{ . }}</code></li>
      {{ end }}
      </ul>
    {{ end }}

    {{ with .incProp.default }}
      <br/>
      Default value: <code>{{ . }}</code>
    {{ end }}

    {{ with .incProp.pattern }}
      <br/>
      Pattern: <code>{{ . }}</code>
    {{ end }}

    {{ with .incProp.minItems }}
      <br/>
      Minimum number of items: <code>{{ . }}</code>
    {{ end }}

    {{ with .incProp.maxItems }}
      <br/>
      Maximum number of items: <code>{{ . }}</code>
    {{ end }}

    {{ with .incProp.example }}
      <br/>
      Example: <code>{{ . }}</code>
    {{ end }}
  </td>
</tr>

{{/* revisit the following part and the prefix stuff when getting to shipment api, it has nested properties in the create shipment request body, itâ€™s basically for indenting the nested property names, which we probably can do better than with two nbspc
{{ $subPrefix := "&nbsp;&nbsp;" }}
{{ $subProp := "" }}
{{ if (eq $propType "object") }}
pepp
{{ $subProp = .properties }}
{{ partial "api/ramltyperow.html" (dict "context" . "incProp" $subProp "hideRequired" $hideRequired "incPrefix" $subPrefix ) }}
{{ else if (eq $propType "array") }}

{{ else if $isCustomType }}
not custom type
{{ $subProp = .properties }}
{{ partial "api/ramltyperow.html" (dict "context" . "incProp" $subProp "hideRequired" $hideRequired "incPrefix" $subPrefix ) }}
{{ end }} */}}

{{/*
{% if propType == 'object' %}
{% assign subPrefixPreAppend = prefix %}
{% assign subPrefix = prefix | append: '&nbsp;&nbsp;' %}
{% for propHash in prop.properties %}
  {% assign subProp = propHash[1] %}
  {% include raml_type_row.html prop=subProp prefix=subPrefix hide_required=include.hide_required %}
{% endfor %}
{% assign subPrefix = subPrefixPreAppend %}
{% elsif propType == 'array' %}
{% assign subPrefixPreAppend = prefix %}
{% assign subPrefix = prefix | append: '&nbsp;&nbsp;' %}
{% assign subType = page.api.types | extract_type: prop.items %}
{% for propHash in subType.properties %}
  {% assign subProp = propHash[1] %}
  {% include raml_type_row.html prop=subProp prefix=subPrefix hide_required=include.hide_required %}
{% endfor %}
{% assign subPrefix = subPrefixPreAppend %}
{% elsif is_custom_type %}
{% assign subPrefixPreAppend = prefix %}
{% assign subPrefix = prefix | append: '&nbsp;&nbsp;' %}
{% assign subType = page.api.types | extract_type: propType %}
{% for propHash in subType.properties %}
  {% assign subProp = propHash[1] %}
  {% include raml_type_row.html prop=subProp prefix=subPrefix hide_required=include.hide_required %}
{% endfor %}
{% assign subPrefix = subPrefixPreAppend %}
{% endif %} */}}

